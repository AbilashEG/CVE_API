<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CVE List</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
  <style>
    .container {
      max-width: 1200px;
      margin: auto;
    }
    table {
      table-layout: fixed;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
  <div class="container mt-4">
    <h1 class="mb-4">CVE List</h1>
    
    <!-- Dropdown for selecting number of results per page -->
    <div class="mb-3">
      <label for="resultsPerPage" class="form-label">Results per page:</label>
      <select id="resultsPerPage" class="form-select w-auto" onchange="updateResultsPerPage()">
        <option value="10" {% if per_page == 10 %}selected{% endif %}>10</option>
        <option value="50" {% if per_page == 50 %}selected{% endif %}>50</option>
        <option value="100" {% if per_page == 100 %}selected{% endif %}>100</option>
      </select>
    </div>
    
    <!-- Table for CVE entries -->
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>CVE ID</th>
          <th>Identifier</th>
          <th>Published Date</th>
          <th>Last Modified Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for cve in cves %}
        <tr>
          <td><a href="/cves/{{ cve.cve_id }}">{{ cve.cve_id }}</a></td>
          <td>{{ cve.identifier }}</td>
          <td>{{ cve.published_date }}</td>
          <td>{{ cve.last_modified_date }}</td>
          <td>{{ cve.status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    
    <!-- Pagination Controls -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item {% if current_page == 1 %}disabled{% endif %}">
          <a class="page-link" href="?page={{ current_page - 1 }}&per_page={{ per_page }}">Previous</a>
        </li>
     
        <li class="page-item {% if current_page == total_pages %}disabled{% endif %}">
          <a class="page-link" href="?page={{ current_page + 1 }}&per_page={{ per_page }}">Next</a>
        </li>
      </ul>
    </nav>
  </div>
  
  <script>
    function updateResultsPerPage() {
      var perPage = document.getElementById('resultsPerPage').value;
      window.location.href = '?page=1&per_page=' + perPage;
    }
  </script>
</body>
</html>
